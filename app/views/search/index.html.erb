<h1>Search Results</h1>

<% if @results.any? %>
  <ul>
    <% @results.each do |result| %>
      <% if result.is_a?(Clinic) %>
        <li class="mb-4">
          <h3>🏥 <%= link_to result.name, clinic_path(result) %></h3>
          <p><strong>Address:</strong> <%= result.address %></p>
          <p><strong>Specialties offered:</strong></p>
          <ul>
            <% result.doctors.map(&:specialties).flatten.uniq.each do |specialty| %>
              <li><%= specialty.name %></li>
            <% end %>
          </ul>
          <hr>
        </li>
      <% elsif result.is_a?(Doctor) %>
        <li class="mb-4">
          <h3>👨‍⚕️ <%= link_to "Dr. #{result.user.profile.first_name} #{result.user.profile.last_name}", doctor_path(result) %></h3>
          <p><strong>Specialties:</strong> <%= result.specialties.map(&:name).join(", ") %></p>
          <p><strong>Clinic:</strong> <%= result.clinic.name %></p>
          <hr>
        </li>
      <% end %>
    <% end %>
  </ul>
<% else %>
  <p>No results found for "<%= params[:query] %>".</p>
<% end %>

<%= link_to 'Back to search', root_path, class: 'btn btn-outline-primary mt-4' %>
